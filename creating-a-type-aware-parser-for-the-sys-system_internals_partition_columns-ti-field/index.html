<!DOCTYPE html>
<html>
	

<head>
	<title>Creating a Type Aware Parser for the sys.system_internals_partition_columns.ti Field | Mark S. Rasmussen</title>
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<meta charset="UTF-8" />
	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="website" />
	<meta name="google-site-verification" content="alt7-wfK3ZujMQ4D0jYNd0yC5LGetGdqBlBmZsqQlVw" />
	<link rel="alternative" href="http://feeds.feedburner.com/Improvedk" title="Mark S. Rasmussen" type="application/atom+xml">
	<script src="/js/combined.js"></script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-2479580-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
	<link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
	<body>
		<div id="headerline"></div>
	
		<header>
			<div class="wrapper">
				<div id="title">
					<a href="/">Mark S. Rasmussen</a> <span>improve.dk</span>
				</div>
				
				<nav>
					<ul class="normal">
						<li class="navicon"><img src="/img/navicon.png" /></li>
						<li><a href="/about-me/">About Me</a></li>
					</ul>
				</nav>
				
				<ul id="sharing">
					<li><a href="mailto:mark@improve.dk"><img src="/img/at.png" /></a></li>
					<li><a href="http://feeds.feedburner.com/Improvedk"><img src="/img/rss.png" /></a></li>
					<li><a href="https://twitter.com/improvedk"><img src="/img/twitter.png" /></a></li>
					<li><a href="https://github.com/improvedk"><img src="/img/github.png" /></a></li>
					<li><a href="https://www.linkedin.com/in/markrasmussen/"><img src="/img/linkedin.png" /></a></li>
				</ul>

				<div class="clear"></div>
				
				<div id="naviconcontent">
					<ul class="mobile">
						<li>
							Pages
							<ul class="pages"></ul>
						</li>
						<li>
							Categories
							<ul class="categories"></ul>
						</li>
						<li>
							Archive
							<ul class="archive"></ul>
						</li>
					</ul>
				</div>
			</div>
		</header>

		<div id="mainwrapper">
			<div id="contentwrapper">
				<div id="content">
				
					<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Jul</span>
			<span class="day">13</span>
		</div>
		<div class="lower">2011</div>
	</div>

	<div class="title">
		<h1><a href="/creating-a-type-aware-parser-for-the-sys-system_internals_partition_columns-ti-field/" title="Creating a Type Aware Parser for the sys.system_internals_partition_columns.ti Field" rel="bookmark">Creating a Type Aware Parser for the sys.system_internals_partition_columns.ti Field</a></h1>
		<div class="categories">
			
				<a href="http://improve.dk/category/SQL Server - Internals/">SQL Server - Internals</a>
				
			
		</div>
		
			<div class="comments">
				<a href="#comments" title="Comment on Creating a Type Aware Parser for the sys.system_internals_partition_columns.ti Field">Comments</a>
			</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" class="single">

		
		
			<div class="body">
			
				<p>Based on my findings <a href="/exploring-the-sys-system_internals_partition_columns-ti-field">exploring the sys.system_internals_partition_columns.ti field</a>, I needed parser that could extract the scale, precision, max_length as well as the max_inrow_length fields from it. The tricky part is that those values are stored differently for each individual type, added onto the fact that some types have hardcoded defaults that are not stored in the ti field, even though there’s space for it.</p>
<a id="more"></a>

<p>As a result of some reverse engineering and empirical testing, I’ve made a SysrscolTIParser class that takes in the ti value (I have no idea what the acronym stands for – type information perhaps?), determines the type and parses it corresponding to the type. I won’t go into details as that’s all described in my <a href="/exploring-the-sys-system_internals_partition_columns-ti-field">previous post</a>.</p>
<figure class="highlight csharp"><pre>using System;
using OrcaMDF.Core.MetaData.Enumerations;

namespace OrcaMDF.Core.MetaData
{
	public class SysrscolTIParser
	{
		public byte Scale;
		public byte Precision;
		public short MaxLength;
		public short MaxInrowLength;
		public int TypeID;

		public SysrscolTIParser(int ti)
		{
			TypeID = ti & 0xFF;

			if (!Enum.IsDefined(typeof(SystemType), TypeID))
				throw new ArgumentException(<span class="string">"Unknown TypeID '"</span> + TypeID + <span class="string">"'"</span>);

			switch((SystemType)TypeID)
			{
				case SystemType.Bigint:
					MaxLength = MaxInrowLength = 8;
					Precision = 19;
					break;

				// All CLR types internally stored as varbinaries
				//case SystemType.Geography:
				//case SystemType.Geometry:
				//case SystemType.Hierarchyid:
				case SystemType.Varbinary:
				// Also covers SystemType.Sysname
				case SystemType.Nvarchar:
				case SystemType.Binary:
				case SystemType.Char:
				case SystemType.Nchar:
				case SystemType.Image:
				case SystemType.Ntext:
				case SystemType.Text:
				case SystemType.Varchar:
				case SystemType.Xml:
					MaxLength = (short)((ti & 0xFFFF00) &gt;&gt; 8);
					if (MaxLength == 0)
					{
						MaxLength = -1;
						MaxInrowLength = 8000;
					}
					else
						MaxInrowLength = MaxLength;
					break;

				case SystemType.Bit:
					MaxLength = MaxInrowLength = Precision = 1;
					break;

				case SystemType.Date:
					Precision = 10;
					MaxLength = MaxInrowLength = 3;
					break;

				case SystemType.Datetime:
					Scale = 3;
					Precision = 23;
					MaxLength = MaxInrowLength = 8;
					break;

				case SystemType.Datetime2:
					Scale = (byte)((ti & 0xFF00) &gt;&gt; 8);
					Precision = (byte)(20 + Scale);
					if (Scale &lt; 3)
						MaxLength = MaxInrowLength = 6;
					else if (Scale &lt; 5)
						MaxLength = MaxInrowLength = 7;
					else
						MaxLength = MaxInrowLength = 8;
					break;

				case SystemType.DatetimeOffset:
					Scale = (byte)((ti & 0xFF00) &gt;&gt; 8);
					Precision = (byte)(26 + (Scale &gt; 0 ? Scale + 1 : Scale));
					if (Scale &lt; 3)
						MaxLength = MaxInrowLength = 8;
					else if (Scale &lt; 5)
						MaxLength = MaxInrowLength = 9;
					else
						MaxLength = MaxInrowLength = 10;
					break;

				case SystemType.Decimal:
				case SystemType.Numeric:
					Precision = (byte)((ti & 0xFF00) &gt;&gt; 8);
					Scale = (byte)((ti & 0xFF0000) &gt;&gt; 16);
					if (Precision &lt; 10)
						MaxLength = MaxInrowLength = 5;
					else if (Precision &lt; 20)
						MaxLength = MaxInrowLength = 9;
					else if (Precision &lt; 29)
						MaxLength = MaxInrowLength = 13;
					else
						MaxLength = MaxInrowLength = 17;
					break;

				case SystemType.Float:
					Precision = 53;
					MaxLength = MaxInrowLength = 8;
					break;
					
				case SystemType.Int:
					Precision = 10;
					MaxLength = MaxInrowLength = 4;
					break;

				case SystemType.Money:
					Scale = 4;
					Precision = 19;
					MaxLength = MaxInrowLength = 8;
					break;

				case SystemType.Real:
					Precision = 24;
					MaxLength = MaxInrowLength = 4;
					break;

				case SystemType.Smalldatetime:
					Precision = 16;
					MaxLength = MaxInrowLength = 4;
					break;

				case SystemType.Smallint:
					Precision = 5;
					MaxLength = MaxInrowLength = 2;
					break;

				case SystemType.Smallmoney:
					Scale = 4;
					Precision = 10;
					MaxLength = MaxInrowLength = 4;
					break;

				case SystemType.Sql_Variant:
					MaxLength = MaxInrowLength = 8016;
					break;

				case SystemType.Time:
					Scale = (byte)((ti & 0xFF00) &gt;&gt; 8);
					Precision = (byte)(8 + (Scale &gt; 0 ? Scale + 1 : Scale));
					if (Scale &lt; 3)
						MaxLength = MaxInrowLength = 3;
					else if (Scale &lt; 5)
						MaxLength = MaxInrowLength = 4;
					else
						MaxLength = MaxInrowLength = 5;
					break;

				case SystemType.Timestamp:
					MaxLength = MaxInrowLength = 8;
					break;

				case SystemType.Tinyint:
					Precision = 3;
					MaxLength = MaxInrowLength = 1;
					break;

				case SystemType.Uniqueidentifier:
					MaxLength = MaxInrowLength = 16;
					break;

				default:
					throw new ArgumentException(<span class="string">"TypeID '"</span> + TypeID + <span class="string">"' not supported."</span>);
			}
		}
	}
}
</pre></figure>

<p>It uses a SystemType enumeration for switching between the types (sorry, formatting isn’t being nice to me here):</p>
<figure class="highlight csharp"><pre>namespace OrcaMDF.Core.MetaData.Enumerations
{
	public enum SystemType
	{
		Image				= 34,
		Text				= 35,
		Uniqueidentifier		= 36,
		Date				= 40,
		Time				= 41,
		Datetime2			= 42,
		DatetimeOffset			= 43,
		Tinyint				= 48,
		Smallint			= 52,
		Int				= 56,
		Smalldatetime			= 58,
		Real				= 59,
		Money				= 60,
		Datetime			= 61,
		Float				= 62,
		Sql_Variant			= 98,
		Ntext				= 99,
		Bit				= 104,
		Decimal				= 106,
		Numeric				= 108,
		Smallmoney			= 122,
		Bigint				= 127,
		Hierarchyid			= 240,
		Geometry			= 240,
		Geography			= 240,
		Varbinary			= 165,
		Varchar				= 167,
		Binary				= 173,
		Char				= 175,
		Timestamp			= 189,
		Nvarchar			= 231,
		Nchar				= 239,
		Xml				= 241,
		Sysname				= 231
	}
}
</pre></figure>

<p>And last, but not least, a bunch of tests to verify the functionality:</p>
<figure class="highlight csharp"><pre>using NUnit<span class="preprocessor">.Framework</span><span class="comment">;</span>
using OrcaMDF<span class="preprocessor">.Core</span><span class="preprocessor">.MetaData</span><span class="comment">;</span>

namespace OrcaMDF<span class="preprocessor">.Core</span><span class="preprocessor">.Tests</span><span class="preprocessor">.MetaData</span>
{
	[TestFixture]
	public class SysrscolTIParserTests
	{
		[Test]
		public void Bigint()
		{
			var parser = new SysrscolTIParser(<span class="number">127</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">19</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">127</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Binary()
		{
			var parser = new SysrscolTIParser(<span class="number">12973</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">50</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">173</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">50</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Bit()
		{
			var parser = new SysrscolTIParser(<span class="number">104</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">1</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">1</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">104</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">1</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Char()
		{
			var parser = new SysrscolTIParser(<span class="number">2735</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">10</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">175</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">10</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Date()
		{
			var parser = new SysrscolTIParser(<span class="number">40</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">10</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">3</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">40</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">3</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Datetime()
		{
			var parser = new SysrscolTIParser(<span class="number">61</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">3</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">23</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">61</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Datetime2()
		{
			var parser = new SysrscolTIParser(<span class="number">1834</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">7</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">27</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">42</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>

			parser = new SysrscolTIParser(<span class="number">810</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">3</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">23</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">7</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">42</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">7</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Datetimeoffset()
		{
			var parser = new SysrscolTIParser(<span class="number">1835</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">7</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">34</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">10</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">43</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">10</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>

			parser = new SysrscolTIParser(<span class="number">1067</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">31</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">43</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Decimal()
		{
			var parser = new SysrscolTIParser(<span class="number">330858</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">5</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">12</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">106</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>

			parser = new SysrscolTIParser(<span class="number">396138</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">6</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">11</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">106</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Float()
		{
			var parser = new SysrscolTIParser(<span class="number">62</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">53</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">62</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Varbinary()
		{
			var parser = new SysrscolTIParser(<span class="number">165</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(-<span class="number">1</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">165</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8000</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>

			parser = new SysrscolTIParser(<span class="number">228517</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">892</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">165</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">892</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Image()
		{
			var parser = new SysrscolTIParser(<span class="number">4130</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">34</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Int()
		{
			var parser = new SysrscolTIParser(<span class="number">56</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">10</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">56</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Money()
		{
			var parser = new SysrscolTIParser(<span class="number">60</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">19</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">60</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Nchar()
		{
			var parser = new SysrscolTIParser(<span class="number">5359</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">20</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">239</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">20</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Ntext()
		{
			var parser = new SysrscolTIParser(<span class="number">4195</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">99</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Numeric()
		{
			var parser = new SysrscolTIParser(<span class="number">265580</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">13</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">108</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>

			parser = new SysrscolTIParser(<span class="number">135020</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">2</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">15</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">108</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">9</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Nvarchar()
		{
			var parser = new SysrscolTIParser(<span class="number">25831</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">100</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">231</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">100</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>

			parser = new SysrscolTIParser(<span class="number">231</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(-<span class="number">1</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">231</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8000</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Real()
		{
			var parser = new SysrscolTIParser(<span class="number">59</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">24</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">59</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Smalldatetime()
		{
			var parser = new SysrscolTIParser(<span class="number">58</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">58</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Smallint()
		{
			var parser = new SysrscolTIParser(<span class="number">52</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">5</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">2</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">52</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">2</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Smallmoney()
		{
			var parser = new SysrscolTIParser(<span class="number">122</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">10</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">122</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Sql_Variant()
		{
			var parser = new SysrscolTIParser(<span class="number">98</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8016</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">98</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8016</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Text()
		{
			var parser = new SysrscolTIParser(<span class="number">4131</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">35</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Time()
		{
			var parser = new SysrscolTIParser(<span class="number">1833</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">7</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">5</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">41</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">5</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>

			parser = new SysrscolTIParser(<span class="number">1065</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">13</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">41</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">4</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Timestamp()
		{
			var parser = new SysrscolTIParser(<span class="number">189</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">189</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Tinyint()
		{
			var parser = new SysrscolTIParser(<span class="number">48</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">3</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">1</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">48</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">1</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Uniqueidentifier()
		{
			var parser = new SysrscolTIParser(<span class="number">36</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">36</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">16</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Varchar()
		{
			var parser = new SysrscolTIParser(<span class="number">12967</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">50</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">167</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">50</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>

			parser = new SysrscolTIParser(<span class="number">167</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(-<span class="number">1</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">167</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8000</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}

		[Test]
		public void Xml()
		{
			var parser = new SysrscolTIParser(<span class="number">241</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Scale</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">0</span>, parser<span class="preprocessor">.Precision</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(-<span class="number">1</span>, parser<span class="preprocessor">.MaxLength</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">241</span>, parser<span class="preprocessor">.TypeID</span>)<span class="comment">;</span>
			Assert<span class="preprocessor">.AreEqual</span>(<span class="number">8000</span>, parser<span class="preprocessor">.MaxInrowLength</span>)<span class="comment">;</span>
		}
	}
}
</pre></figure>

<p>All of this is just one big giant bit of infrastructure I needed to implement to get my scanning of nonclustered indexes working. As soon as I’ve got that up and running, all of this, plus a lot more, will be committed &amp; pushed to the <a href="https://github.com/improvedk/OrcaMDF" target="_blank">OrcaMDF repo</a>.</p>


				<div style="clear: both"></div>

				
					<div id="postsharing">
						<a href="https://twitter.com/home?status=Creating%20a%20Type%20Aware%20Parser%20for%20the%20sys.system_internals_partition_columns.ti%20Field%20http%3A%2F%2Fimprove.dk%2Fcreating-a-type-aware-parser-for-the-sys-system_internals_partition_columns-ti-field%2F%20via%20%40improvedk" target="_blank"><img src="/img/twitter_64x64.png" /></a>
						<a href="https://www.facebook.com/sharer.php?u=http%3A%2F%2Fimprove.dk%2Fcreating-a-type-aware-parser-for-the-sys-system_internals_partition_columns-ti-field%2F" target="_blank"><img src="/img/facebook_64x64.png" /></a>
						<a href="http://reddit.com/submit?url=http%3A%2F%2Fimprove.dk%2Fcreating-a-type-aware-parser-for-the-sys-system_internals_partition_columns-ti-field%2F&title=Creating%20a%20Type%20Aware%20Parser%20for%20the%20sys.system_internals_partition_columns.ti%20Field" target="_blank"><img src="/img/reddit_64x64.png" /></a>
						<a href="https://github.com/improvedk/improve.dk/blob/master/source/_posts/creating-a-type-aware-parser-for-the-sys-system_internals_partition_columns-ti-field/creating-a-type-aware-parser-for-the-sys-system_internals_partition_columns-ti-field.md" target="_blank" title="View source"><img src="/img/octocat_64x64.png" /></a>
					</div>

					<div id="bio">
						<img src="/img/avatar.jpg" class="avatar photo" height="96" width="96">
						<div class="wrapper">
							<div class="name">Mark S. Rasmussen</div>
							<div class="description">
								I'm the CTO at <a href="http://www.ipaper-cms.com/">iPaper</a> where I cuddle with databases, mold code and maintain the overall technical &amp; team responsibility. I'm an avid speaker at user groups &amp; conferences. I love life, motorcycles, photography and all things technical. Say hi on <a href="http://twitter.com/improvedk">Twitter</a>, write me an <a href="mailto:mark@improve.dk">email</a> or look me up on <a href="http://dk.linkedin.com/in/markrasmussen/">LinkedIn</a>.
							</div>
						</div>
						<div class="clear"></div>
					</div>
				

			</div>

		

		
			<a name="comments"></a>
<div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'improvedk';
	var disqus_identifier = 'creating-a-type-aware-parser-for-the-sys-system_internals_partition_columns-ti-field';
	var disqus_url = 'http://improve.dk/creating-a-type-aware-parser-for-the-sys-system_internals_partition_columns-ti-field/';

	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
		

	</div>
</article>

				</div>
			</div>

			<div id="asides">
				<div class="categories aside">
					<span class="sectiontitle">CATEGORIES</span>
					<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/category/.NET/">.NET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/AS/Flex/Flash/">AS/Flex/Flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Amazon Web Services/">Amazon Web Services</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Computer Science/">Computer Science</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Conferences and Presenting/">Conferences and Presenting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/IIS/">IIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Life/">Life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Miscellaneous/">Miscellaneous</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Performance/">Performance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Poker/">Poker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server/">SQL Server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Community/">SQL Server - Community</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Data Types/">SQL Server - Data Types</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Internals/">SQL Server - Internals</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Optimization/">SQL Server - Optimization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - OrcaMDF/">SQL Server - OrcaMDF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Tricks/">SQL Server - Tricks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Testing/">Testing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Tools of the Trade/">Tools of the Trade</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Umbraco/">Umbraco</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Visual Studio/">Visual Studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Web/">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Windbg/">Windbg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Windows/">Windows</a></li></ul>

					
				</div>

				<div class="archive aside">
					<span class="sectiontitle">ARCHIVE</span>
					<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archive/2014">2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2013">2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2012">2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2011">2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2010">2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2009">2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2008">2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2007">2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2006">2006</a></li></ul>
				</div>
			</div>

			<div class="clear"></div>
		</div>
		
		<footer>
			<div class="wrapper">Copyright &copy; 2014 Mark S. Rasmussen</div>
		</footer>

		<script type="text/javascript">
			$(function () {
				// Show mobile menu
				$("li.navicon").click(function () {
					if ($("header ul.mobile a").length == 0) {
						// Pages
						$mobilePages = $("div#naviconcontent ul.pages");
						$("header nav ul.normal > li").not(".navicon").each(function (i, el) {
							$mobilePages.append($(el).clone());
						});

						// Categories
						$mobileCategories = $("div#naviconcontent ul.categories");
						$("div#asides div.categories > ul > li").each(function (i, el) {
							$mobileCategories.append($(el).clone());
						});

						// Archive
						$mobileArchive = $("div#naviconcontent ul.archive");
						$("div#asides div.archive > ul > li").each(function (i, el) {
							$mobileArchive.append($(el).clone());
						});
					};

					$("header ul.mobile").toggle();
				});

				// Fancybox setup
				$("a.fancy").fancybox({
					hideOnContentClick: true,
					overlayShow: true
				});
			});
		</script>
	</body>
</html>