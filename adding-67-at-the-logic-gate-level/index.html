<!DOCTYPE html>
<html>
	

<head>
	<title>Adding 6+7 At The Logic Gate Level | Mark S. Rasmussen</title>
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<meta charset="UTF-8" />
	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="website" />
	<meta name="google-site-verification" content="alt7-wfK3ZujMQ4D0jYNd0yC5LGetGdqBlBmZsqQlVw" />
	<link rel="alternative" href="http://feeds.feedburner.com/Improvedk" title="Mark S. Rasmussen" type="application/atom+xml">
	<script src="/js/combined.js"></script>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-2479580-1', 'improve.dk');
		ga('require', 'displayfeatures');
		ga('send', 	'pageview');
	</script>
	<link rel="stylesheet" href="/css/style.css" type="text/css" />
	<link rel="stylesheet" href="/css/print.css" type="text/css" media="print" />
</head>
	<body>
		<div id="headerline"></div>
	
		<header>
			<div class="wrapper">
				<div id="title">
					<a href="/">Mark S. Rasmussen</a> <span>improve.dk</span>
				</div>
				
				<nav>
					<ul class="normal">
						<li class="navicon"></li>
						<li><a href="/about-me/">About Me</a></li>
					</ul>
				</nav>
				
				<ul id="sharing">
					<li><a href="mailto:mark@improve.dk" id="shareat"></a></li>
					<li><a href="http://feeds.feedburner.com/Improvedk" id="rssfeed"></a></li>
					<li><a href="https://twitter.com/improvedk" id="sharetwitter"></a></li>
					<li><a href="https://github.com/improvedk" id="sharegithub"></a></li>
					<li><a href="https://www.linkedin.com/in/markrasmussen/" id="sharelinkedin"></a></li>
				</ul>

				<div class="clear"></div>
				
				<div id="naviconcontent">
					<ul class="mobile">
						<li>
							Pages
							<ul class="pages"></ul>
						</li>
						<li>
							Categories
							<ul class="categories"></ul>
						</li>
						<li>
							Archive
							<ul class="archive"></ul>
						</li>
					</ul>
				</div>
			</div>
		</header>

		<div id="mainwrapper">
			<div id="contentwrapper">
				<div id="content">
				
					<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Feb</span>
			<span class="day">06</span>
		</div>
		<div class="lower">2012</div>
	</div>

	<div class="title">
		<h1><a href="/adding-67-at-the-logic-gate-level/" title="Adding 6+7 At The Logic Gate Level" rel="bookmark">Adding 6+7 At The Logic Gate Level</a></h1>
		<div class="categories">
			
				<a href="/category/Computer Science/">Computer Science</a>
				
			
		</div>
		
			<div class="comments">
				<a href="#comments" title="Comment on Adding 6+7 At The Logic Gate Level">Comments</a>
			</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" class="single">

		
		
			<div class="body">
			
				<p>Most people can do simple decimal addition in their heads, and even advanced addition using common rules like carrying. Here’s how we’d add 6 + 7:</p>
<a id="more"></a>


<figure class="highlight"><pre><span class="code">  1</span>
<span class="code">   6</span>
<span class="header">+  7
----</span>
<span class="code">  13</span>
</pre></figure>

<p>Adding 6+7 gives a result of 3, with a 1 as a carry. In the final step, the 1 carry simply falls down as a 10 on the result, giving 10 + 3 = 13 as the final result.</p>
<p>It may seem extensive to go through this for such a simple operation, but it’s quite important to know of the carry method when we go on.</p>
<h2 id="Binary_addition">Binary addition</h2>
<p>Just as we added two decimal numbers, we can do the exact same in binary. In binary 6 is represented as 0b110 while 7 is represented as 0b111. Take a look:</p>
<p>First we add the first (rightmost) column, resulting in a 0b1 in the sum:</p>
<figure class="highlight"><pre><span class="code">   110</span>
<span class="header">+  111
------</span>
<span class="code">     1</span>
</pre></figure>

<p>Next up we add the second column. In this case the two ones produce the result 0b10 – meaning we’ll get a sum of 0b0 and a carry of 0b1:</p>
<figure class="highlight"><pre><span class="code">   110</span>
<span class="header">+  111
------</span>
<span class="code">    01</span>
</pre></figure>

<p>Then we add the third column. Ignoring the carry, 0b1 + 0b1 gives a sum of 0b10. Adding the 0b1 we had in carry, we get 0b11 – resulting in a sum of 0b1 as well as a carry of 0b1:</p>
<figure class="highlight"><pre><span class="code">  11</span>
<span class="code">   110</span>
<span class="header">+  111
------</span>
<span class="code">   101</span>
</pre></figure>

<p>And finally we add the final column, in this case containing nothing but the carry:</p>
<figure class="highlight"><pre><span class="code">  11</span>
<span class="code">   110</span>
<span class="header">+  111
------</span>
<span class="code">  1101</span>
</pre></figure>

<p>And there we go – 0b1101 = 13 = 6 + 7.</p>
<h2 id="Implementing_a_simple_ALU_that_does_addition">Implementing a simple ALU that does addition</h2>
<p>Now that we can do binary addition by hand, lets recreate a very simple <a href="http://en.wikipedia.org/wiki/Arithmetic_logic_unit" target="_blank">arithmetic logic unit</a> that’ll do the same. The ALU is at the very core of the CPU that’s powering your machine right now. It’s the hearth that does all of the arithmetic and logical operations that are required to run the computer.</p>
<p>In the following I will generally talk of single bits as being enabled/positive/true/1 or being disabled/negative/false/0. All four designations mean the same and will be used depending on the context.</p>
<h2 id="The_half_adder">The half adder</h2>
<p>The first step is to implement what’s known as a <a href="http://en.wikipedia.org/wiki/Adder_(electronics" target="_blank">half adder</a>#Half_adder). This is the circuit that takes two bits and adds them together. The result is a sum value as well as a carry. Both can be either 0 or 1.</p>
<p>In the following circuit we get two inputs from the left, bits A and B. Both A and B are connected to an <a href="http://en.wikipedia.org/wiki/XOR_gate" target="_blank">XOR gate</a>. The XOR gate (top) gives an output of 1 iff (<strong>if</strong> and only i<strong>f</strong>) only one of the inputs have a value of 1. If A and B have the same value, it gives a result of 0. This is just what we need for the sum – remember, 0b1 + 0b1 gave a result of 0b10 – a sum of 1 and a carry of 0. The XOR gate is thus used to calculate the sum – denoted S in the circuit below.</p>
<p>Both A and B are connected to an <a href="http://en.wikipedia.org/wiki/AND_gate" target="_blank">AND gate</a> as well (bottom). The AND gate gives a result of 1 iff both A and B are 1, in all other cases it gives a result of 0. This is just what we need – if both A and B are 1, it means we get an output of 1 – the carry.</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_16.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_16.png" style="max-height: 250px"/></a></div></div>

<p>If we enable A, we see how the signal propagates through the XOR gate and results in an enabled sum:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_6.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_6.png" style="max-height: 250px"/></a></div></div>

<p>The result is exactly the same if we just enable B instead:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_14.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_14.png" style="max-height: 250px"/></a></div></div>

<p>And finally, if we enable both, we get a disabled sum but an enabled carry instead:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_12.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_12.png" style="max-height: 250px"/></a></div></div>

<p>As we’ll be reusing the half adder in the next circuit, I’ve converted it into an integrated circuit (IC). On the left we have the input bits A and B on top &amp; bottom respectively. On the right we have the sum on top and the carry at the bottom.</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_18.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_18.png" style="max-height: 250px"/></a></div></div>

<p>Having created the half adder IC, we can now simplify our circuit somewhat:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_20.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_20.png" style="max-height: 250px"/></a></div></div>

<h2 id="The_full_adder">The full adder</h2>
<p>At this point we have a fully working ALU capable of adding two 1-bit numbers and outputting a 2-bit result. As most computers today are either 32-bit or 64-bit, we obviously need to expand our ALU’s capabilities. Let’s work towards making it accept two 2-bit inputs instead.</p>
<p>To do so we first need to create another component, the <a href="http://en.wikipedia.org/wiki/Adder_(electronics" target="_blank">full adder</a>#Full_adder). While the half adder is great for working with just two inputs, to calculate the next column we need to take three inputs – bits A and B, as well as the potential carry C. The result, as before, should still be a sum as well as a carry.</p>
<p>Technically what we’re creating is called a 1-bit full adder, since it’s able to add two 1-bit numbers while also respecting the carry input.</p>
<p>In the following circuit we use two of the half adder IC’s that we created before. Bits A and B are hooked into the first one, while the carry bit is hooked into the second half adder. The sum from the first half adder is used as the second input to the second half adder.</p>
<p>The end sum is a direct sum from both the half adders. For the sum to be enabled, both half adders must produce an enabled sum. Both carry outputs are connected to an <a href="http://en.wikipedia.org/wiki/OR_gate" target="_blank">OR gate</a>. As the name implies, the OR gate will output a positive result if either of the inputs are enabled.</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_22.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_22.png" style="max-height: 250px"/></a></div></div>

<p>If we enabled the A bit, the sum passes right through both half adders and results in a positive sum output:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_24.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_24.png" style="max-height: 250px"/></a></div></div>

<p>If we enabled both A and B, the first half adder gives a carry output, which passes right through the OR gate and results in a positive carry output:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_26.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_26.png" style="max-height: 250px"/></a></div></div>

<p>And finally, if we enable the input carry bit as well, we get a carry output from the first half adder and a sum output from the second one:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_28.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_28.png" style="max-height: 250px"/></a></div></div>

<p>The way the circuit is constructed, it doesn’t matter which of the bits are enabled, only the amount of them. If one is enabled, we get a positive sum. Two enabled results in a positive carry. And finally, if all three are enabled, we get a positive sum as well as a positive carry.</p>
<p>Just to demonstrate, we can disable the B input and get the same positive carry result as we got with the A and B bits enabled:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_30.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_30.png" style="max-height: 250px"/></a></div></div>

<p>Just as we can disabled all but the carry input and get a sum output, just like when only the A bit was enabled:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_32.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_32.png" style="max-height: 250px"/></a></div></div>

<p>Having created this circuit, we can now convert it into a full adder IC and simplify our diagram:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_34.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_34.png" style="max-height: 250px"/></a></div></div>

<h2 id="Chaining_1-bit_full_adders_to_create_a_3-bit_ripple_carry_adder">Chaining 1-bit full adders to create a 3-bit ripple carry adder</h2>
<p>Now that we’re able to easily add two 1-bit numbers using our full adder, let’s try and chain them up so we can add two 2-bit numbers.</p>
<p>In the following diagram we have two 2-bit inputs. The first output bit of both inputs are connected to the A and B inputs on the first full adder (rightmost one). Likewise, the second output bits from each input is connected to the A and B inputs on the second full adder. The carry output from the first full adder is connected to the carry input on the second full adder.</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_42.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_42.png" style="max-height: 250px"/></a></div></div>

<p>Now, we started out wanting to add the numbers 6 and 7. To do so, we need a 3-bit adder so we can express the input numbers 6 and 7, both requiring three input bits.</p>
<p>At this point it’s a trivial operation to extend the adder with one more bit. We simply connect each output bit from the first input to the A bits on each full adder. Likewise we connect each output bit on the second input to the B input bits on each full adder. The carry from the first full adder is added as carry input to the second, and likewise for the second and third full adders.</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_44.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_44.png" style="max-height: 250px"/></a></div></div>

<p>By using the decimal inputs we can now type the input numbers 6 and 7 and see our whole circuit in action, providing the correct output of 13:</p>
<div class="imgwrapper" style=""><div><a href="/adding-67-at-the-logic-gate-level/image_46.png" class="fancy"><img src="/adding-67-at-the-logic-gate-level/image_46.png" style="max-height: 250px"/></a></div></div>

<p>And there we go, we’ve now created a 3-bit <a href="http://en.wikipedia.org/wiki/Adder_(electronics" target="_blank">ripple carry adder</a>#Ripple_carry_adder).</p>
<h2 id="Conclusion">Conclusion</h2>
<p>I’m sure (read: hope) I’m not the only one having the nightmare of an apocalyptic event occurring here on Earth. Imagine the scenario, you’ve got all of the materials in the world as well as all the manpower you need. Unfortunately, you’re the only computer scientist that’s survived. Given time, manpower and materials, would you be able to rebuild the computer as we know it today?</p>
<p>Each layer you peel off of the computer arms you with more knowledge and capability, not just at that layer, but at all of the layers that lie above. Knowing about gate logic enables you to understand so much more of how the CPU works as well as what’s actually being performed once you write “int x = 6+7;” in your application (assuming you also know about all of the layers between the logic gates and your C#/other high level code).</p>
<p>Naturally there are more layers to peel. For instance, you could create your own XOR/AND/OR gates using the base NAND gate. And you could create your own NAND gates using nothing but interconnected transistors. And you could create your own transistors using… You get the point.</p>
<p>I can’t help but feel in total awe of the amount of technology that’s packed in each and every CPU that’s shipped to a home computer somewhere. Experimenting with electrical circuits is lots of fun, and you learn loads from it.</p>
<p>If you want to try it out for yourself, go grab a copy of Steve Kollmansbergers (free) open source <a href="http://www.kolls.net/gatesim/" target="_blank">Logic Gate Simulator</a>.</p>


				<div style="clear: both"></div>

				
					<div id="postsharing">
						<a href="https://twitter.com/home?status=Adding%206%2B7%20At%20The%20Logic%20Gate%20Level%20http%3A%2F%2Fimprove.dk%2Fadding-67-at-the-logic-gate-level%2F%20via%20%40improvedk" target="_blank" class="twitter"></a>
						<a href="https://www.facebook.com/sharer.php?u=http%3A%2F%2Fimprove.dk%2Fadding-67-at-the-logic-gate-level%2F" target="_blank" class="facebook"></a>
						<a href="http://reddit.com/submit?url=http%3A%2F%2Fimprove.dk%2Fadding-67-at-the-logic-gate-level%2F&title=Adding%206%2B7%20At%20The%20Logic%20Gate%20Level" target="_blank" class="reddit"></a>
						<a href="https://github.com/improvedk/improve.dk/blob/master/source/_posts/adding-67-at-the-logic-gate-level/adding-67-at-the-logic-gate-level.md" target="_blank" title="View source" class="github"></a>
					</div>

					<div id="bio">
						<div class="avatar"></div>
						<div class="wrapper">
							<div class="name">Mark S. Rasmussen</div>
							<div class="description">
								I'm the CTO at <a href="http://www.ipaper-cms.com/">iPaper</a> where I cuddle with databases, mold code and maintain the overall technical &amp; team responsibility. I'm an avid speaker at user groups &amp; conferences. I love life, motorcycles, photography and all things technical. Say hi on <a href="http://twitter.com/improvedk">Twitter</a>, write me an <a href="mailto:mark@improve.dk">email</a> or look me up on <a href="http://dk.linkedin.com/in/markrasmussen/">LinkedIn</a>.
							</div>
						</div>
						<div class="clear"></div>
					</div>
				

			</div>

		

		
			<a name="comments"></a>
<div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'improvedk';
	var disqus_identifier = 'adding-67-at-the-logic-gate-level';
	var disqus_url = 'http://improve.dk/adding-67-at-the-logic-gate-level/';

	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
		

	</div>
</article>

				</div>
			</div>

			<div id="asides">
				<div class="categories aside">
					<span class="sectiontitle">CATEGORIES</span>
					<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/category/.NET/">.NET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/AS/Flex/Flash/">AS/Flex/Flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Amazon Web Services/">Amazon Web Services</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Computer Science/">Computer Science</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Conferences and Presenting/">Conferences and Presenting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/IIS/">IIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Life/">Life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Miscellaneous/">Miscellaneous</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Performance/">Performance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Poker/">Poker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server/">SQL Server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Community/">SQL Server - Community</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Data Types/">SQL Server - Data Types</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Internals/">SQL Server - Internals</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Optimization/">SQL Server - Optimization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - OrcaMDF/">SQL Server - OrcaMDF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Tricks/">SQL Server - Tricks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Testing/">Testing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Tools of the Trade/">Tools of the Trade</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Umbraco/">Umbraco</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Visual Studio/">Visual Studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Web/">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Windbg/">Windbg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Windows/">Windows</a></li></ul>

					
				</div>

				<div class="archive aside">
					<span class="sectiontitle">ARCHIVE</span>
					<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archive/2014">2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2013">2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2012">2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2011">2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2010">2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2009">2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2008">2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2007">2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2006">2006</a></li></ul>
				</div>
			</div>

			<div class="clear"></div>
		</div>
		
		<footer>
			<div class="wrapper">Copyright &copy; 2014 Mark S. Rasmussen</div>
		</footer>

		<script type="text/javascript">
			$(function () {
				// Show mobile menu
				$("li.navicon").click(function () {
					if ($("header ul.mobile a").length == 0) {
						// Pages
						$mobilePages = $("div#naviconcontent ul.pages");
						$("header nav ul.normal > li").not(".navicon").each(function (i, el) {
							$mobilePages.append($(el).clone());
						});

						// Categories
						$mobileCategories = $("div#naviconcontent ul.categories");
						$("div#asides div.categories > ul > li").each(function (i, el) {
							$mobileCategories.append($(el).clone());
						});

						// Archive
						$mobileArchive = $("div#naviconcontent ul.archive");
						$("div#asides div.archive > ul > li").each(function (i, el) {
							$mobileArchive.append($(el).clone());
						});
					};

					$("header ul.mobile").toggle();
				});

				// Fancybox setup
				$("a.fancy").fancybox({
					hideOnContentClick: true,
					overlayShow: true
				});
			});
		</script>
	</body>
</html>