<!DOCTYPE html>
<html>
	

<head>
	<title>Mark S. Rasmussen</title>
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<meta charset="UTF-8" />
	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="website" />
	<meta name="google-site-verification" content="alt7-wfK3ZujMQ4D0jYNd0yC5LGetGdqBlBmZsqQlVw" />
	<meta content="article" property="og:type">
<meta property="og:title">
<meta content="http://improve.dk/page/3/" property="og:url">
<meta property="og:image">
<meta content="Mark S. Rasmussen" property="og:site_name">
<meta property="og:description">
<meta content="summary" name="twitter:card">
	<link rel="alternative" href="http://feeds.feedburner.com/Improvedk" title="Mark S. Rasmussen" type="application/atom+xml">
	<script src="/js/combined.js"></script>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-2479580-1', 'improve.dk');
		ga('require', 'displayfeatures');
		ga('send', 	'pageview');
	</script>
	<link rel="stylesheet" href="/css/style.css" type="text/css" />
</head>
	<body>
		<div id="headerline"></div>
	
		<header>
			<div class="wrapper">
				<div id="title">
					<a href="/">Mark S. Rasmussen</a> <span>improve.dk</span>
				</div>
				
				<nav>
					<ul class="normal">
						<li class="navicon"></li>
						<li><a href="/about-me/">About Me</a></li>
					</ul>
				</nav>
				
				<ul id="sharing">
					<li><a href="mailto:mark@improve.dk" id="shareat"></a></li>
					<li><a href="http://feeds.feedburner.com/Improvedk" id="rssfeed"></a></li>
					<li><a href="https://twitter.com/improvedk" id="sharetwitter"></a></li>
					<li><a href="https://github.com/improvedk" id="sharegithub"></a></li>
					<li><a href="https://www.linkedin.com/in/markrasmussen/" id="sharelinkedin"></a></li>
				</ul>

				<div class="clear"></div>
				
				<div id="naviconcontent">
					<ul class="mobile">
						<li>
							Pages
							<ul class="pages"></ul>
						</li>
						<li>
							Categories
							<ul class="categories"></ul>
						</li>
						<li>
							Archive
							<ul class="archive"></ul>
						</li>
					</ul>
				</div>
			</div>
		</header>

		<div id="mainwrapper">
			<div id="contentwrapper">
				<div id="content">
				
					
	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Feb</span>
			<span class="day">27</span>
		</div>
		<div class="lower">2013</div>
	</div>

	<div class="title">
		<h1><a href="/native-chrome-flash-player-disabled-by-itself/" title="Native Chrome Flash Player Disabled by Itself All of a Sudden" rel="bookmark">Native Chrome Flash Player Disabled by Itself All of a Sudden</a></h1>
		<div class="categories">
			
				<a href="/category/Miscellaneous/">Miscellaneous</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>At my job we’ve got a product that relies heavily on Flash. The last couple of days I’ve had a number of users complain that, all of a sudden, they couldn’t view Flash content any more. Common for all of them were their browser - Chrome. It would seem that, somehow, the native Chrome Flash player got disabled by itself all of a sudden.</p>
<a id="more"></a>

<p>What’s especially unusual about this is that Chrome has a built-in Flash player, so if anyone, Chrome users should be able to view Flash content. Digging deeper I found that the built-in Flash player extension had been disabled. To check if that’s the case, see here:</p>
<figure class="highlight sql"><pre>Chrome Settings =&gt; Show advanced settings... =&gt; Privacy =&gt; Content settings... =&gt; Plug-ins =&gt; Disable individual plug-ins...
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/native-chrome-flash-player-disabled-by-itself/Flash.png" class="fancy"><img src="/native-chrome-flash-player-disabled-by-itself/Flash.png" style="max-height: 250px"/></a></div></div>

<p>By just clicking “Enable”, everything is working again. But how did it get disabled? This is such a convoluted place to find that I know the users haven’t done so themselves. Looking at Twitter, it seems we’re not alone in seeing this:</p>
<p><a href="https://twitter.com/AnandaWoW/status/306751670258388992" target="_blank">https://twitter.com/AnandaWoW/status/306751670258388992</a></p>
<p><a href="https://twitter.com/RachofSuburbia/status/306426446438617088" target="_blank">https://twitter.com/RachofSuburbia/status/306426446438617088</a></p>
<p><a href="https://twitter.com/linnysvault/status/306420799550660608" target="_blank">https://twitter.com/linnysvault/status/306420799550660608</a></p>
<p><a href="https://twitter.com/Astracius/status/306351364710219776" target="_blank">https://twitter.com/Astracius/status/306351364710219776</a></p>
<p><a href="https://twitter.com/junctionette/status/306230350131130370" target="_blank">https://twitter.com/junctionette/status/306230350131130370</a></p>
<p><a href="https://twitter.com/envyonthetoast/status/306210978201219073" target="_blank">https://twitter.com/envyonthetoast/status/306210978201219073</a></p>
<p>… I think you get the picture. It seems that all of our users had just had their Flash player auto update itself. I’m wondering, could the Internet Explorer Flash plugin perhaps updated itself and, by mistake, disabled the Chrome plugin? If the built-in Chrome Flash player is disabled, Chrome will try to use the regular Flash plugin. However, the Internet Explorer version won’t work in Chrome, so that won’t work.</p>
<p>Anyone else experienced this? Any tips on what’s causing it? The fix is simple, but I’d really like to understand what’s causing this, as well as knowing how widespread the issue is.</p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Feb</span>
			<span class="day">21</span>
		</div>
		<div class="lower">2013</div>
	</div>

	<div class="title">
		<h1><a href="/sqlsaturday-196-presenting-a-precon/" title="SQLSaturday &amp;#35;196 - Presenting a Precon" rel="bookmark">SQLSaturday &amp;#35;196 - Presenting a Precon</a></h1>
		<div class="categories">
			
				<a href="/category/Conferences and Presenting/">Conferences and Presenting</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>Seeing SQLSaturday events sprawling up all over the world makes me all warm and fuzzy inside. Long have I been considering whether one might happen in Denmark, but to be honest, I didn’t think the audience would be big enough. I’m biased though as I’ve mainly attended events outside of Denmark, and thus most of my acquaintances have been non-Danish. But lo and behold, Régis Baccaro just announced that <a href="http://www.sqlsaturday.com/196/eventhome.aspx" target="_blank">SQLSaturday #196</a> now has <a href="https://twitter.com/regbac/status/304320528095793154" target="_blank">101 registered attendees</a>! And best of all, it’s held in Copenhagen on the 20th of April.</p>
<a id="more"></a>

<div class="imgwrapper" style=""><div><a href="/sqlsaturday-196-presenting-a-precon/logo.png" class="fancy"><img src="/sqlsaturday-196-presenting-a-precon/logo.png" style="max-height: 250px"/></a></div></div>

<p>Having just about 100 people attend my <a href="http://warmcrocconf.net/Marksr.aspx" target="_blank">Top X SQL Server Developer Mistakes session at Warm Crocodile</a> recently made me realize just how popular SQL Server really is. Nosql might be the hype, but when it comes to business, quite a lot of developers are “stuck” with SQL Server on a daily basis. For the same reason, I absolutely cannot recommend going to SQLSaturday #196 enough! It’s free, it’s an excellent networking opportunity and it’s sure to be full of great speakers and content. Go ahead - <a href="http://www.sqlsaturday.com/196/register.aspx" target="_blank">register here</a>!</p>
<div class="imgwrapper" style=""><div><a href="/sqlsaturday-196-presenting-a-precon/392531_496414643720736_540150277_n-250x166.jpg" class="fancy"><img src="/sqlsaturday-196-presenting-a-precon/392531_496414643720736_540150277_n-250x166.jpg" style="max-height: 250px"/></a></div></div>

<p>I’ll have the pleasure and honor of presenting my <a href="http://sqlsat196precon.eventbrite.com/" target="_blank">A Deep Dive Into the Depths of the SQL Server Storage Engine and MDF File Format</a> precon on the 19th of April, the day before the SQLSaturday event itself. It’s not the first time I’m presenting this precon, in fact, this’ll be my fifth time. This means I’ve now had a number of chances to test my content and optimize the format to ensure you get maximum value out of the day. If you’re planning on attending and have any special requests or questions regarding the content, please do let me know in the comments here!</p>
<p>If storage internals isn’t your thing, there are two other top notch presenters - <a href="http://www.jenstirrup.com/" target="_blank">Jen Stirrup</a> and <a href="http://itknowledgeexchange.techtarget.com/sql-server/" target="_blank">Denny Cherry</a>. Jen will be presenting a <a href="http://sqlsat196precon.eventbrite.com/" target="_blank">Data Visualisation Deep-Dive using SQL Server 2012</a> while Denny will present on <a href="http://sqlsat196precon.eventbrite.com/" target="_blank">SQL Server 2012 in a Highly Available World</a>.</p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Feb</span>
			<span class="day">20</span>
		</div>
		<div class="lower">2013</div>
	</div>

	<div class="title">
		<h1><a href="/blog-revamp/" title="Blog Revamp" rel="bookmark">Blog Revamp</a></h1>
		<div class="categories">
			
				<a href="/category/Life/">Life</a>
				, 
			
				<a href="/category/Miscellaneous/">Miscellaneous</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>Having been at it for almost 11 years, I’ve been through a number of blog revamps through the time. And here we are, once again.</p>
<a id="more"></a>

<p><a href="http://web.archive.org/web/20020929133654/http://www.improve.dk/" target="_blank">I first launched the blog back in 2002</a>, though it was in Danish back then. In 2006 I decided to start over, removed all my Danish content and began blogging in English - at that time, I wrote my own blog engine in a couple of days on a couch in Henderson, Nevada, anxiously waiting to turn 21 so I could participate in the World Series of Poker.</a></p>
<p>Back in 2011 I chose to migrate all my content onto <a href="http://subtextproject.com/" target="_blank">Subtext</a>. What I failed to notice was that the project was pretty much dead, so it was a migration doomed to be still born. It did however allow me access to <a href="http://en.wikipedia.org/wiki/Windows_Live_Writer" target="_blank">Windows Live Writer</a> which served its purpose - it got me blogging again due to its simplicity in use. However, I quickly started to struggle with Subtext as templating was beyond difficult and I had to resort to ugly hacks to make it work the best I could.</p>
<div class="imgwrapper" style=""><div><a href="/blog-revamp/wp-blue-640x9601.png" class="fancy"><img src="/blog-revamp/wp-blue-640x9601.png" style="max-height: 250px"/></a></div></div>

<p>And so it was time for yet another revamp, this time, hopefully the last. Converting everything into Wordpress ought to be a simple task, if it wasn’t for the fact that I had almost 250 posts and 700 comments. Most of them stemming from my homebrewed system, later haphazardly migrated to Subtext, and now lying before Wordpress. I had to write a custom exporter to get most of my content from Subtext into the <a href="http://ipggi.wordpress.com/2011/03/16/the-wordpress-extended-rss-wxr-exportimport-xml-document-format-decoded-and-explained/" target="_blank">Wordpress WXR format</a>. Dealing with attachments, encoding and comments was a major pain. Once I had everything into Wordpress, I had to go through each and every post and manually format the contents - having seven years of legacy left little to no structure, making it impossible to style.</p>
<p>At this point, all I needed to do was to find a good theme and I was up and running. Unfortunately I tend to be quite picky, so I couldn’t find anything I really liked. In the end, I ended up writing my own theme, <a href="https://github.com/improvedk/improve.dk" target="_blank">which I’ve just published to Github</a>. My main priority has been to create a very simplistic theme that worked great across devices, while allowing me to post easily readable code snippets. If you have any suggestions for improvements, I’d love to hear them!</p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Jan</span>
			<span class="day">17</span>
		</div>
		<div class="lower">2013</div>
	</div>

	<div class="title">
		<h1><a href="/top-x-sql-server-developer-mistakes/" title="Top X SQL Server Developer Mistakes" rel="bookmark">Top X SQL Server Developer Mistakes</a></h1>
		<div class="categories">
			
				<a href="/category/Conferences and Presenting/">Conferences and Presenting</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>It’s been a long day, and I’m finally on my way home from Copenhagen to Aarhus. Unfortunately I wasn’t able to attend the first day of the Warm Crocodile conference yesterday. Thankfully I was able to attend today, and even better, I got a chance to present my “Top X SQL Server Developer Mistakes” session today, and I’d like to thank everybody who showed up and helped fill the room to its limit. I got a lot of excellent questions during, as well as after, the session. If I missed yours, please do <a href="mailto:mark@improve.dk">get in touch</a>.</p>
<a id="more"></a>

<p>Both slides, demos and source samples are available on Github:<br><a href="https://github.com/improvedk/Presentation-TopXSQLServerDeveloperMIstakes" target="_blank">https://github.com/improvedk/Presentation-TopXSQLServerDeveloperMIstakes</a></p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Jan</span>
			<span class="day">01</span>
		</div>
		<div class="lower">2013</div>
	</div>

	<div class="title">
		<h1><a href="/and-thus-i-lost-my-introduction/" title="And Thus I Lost My Introduction" rel="bookmark">And Thus I Lost My Introduction</a></h1>
		<div class="categories">
			
				<a href="/category/SQL Server - Community/">SQL Server - Community</a>
				, 
			
				<a href="/category/SQL Server/">SQL Server</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>Seeing as most of my presentations are rather technical, I like to start by pointing out the fact that I have no finished higher education (though in progress), no major certifications or recognitions/awards. This leaves a perfect opportunity for me to explain, from the ground up, why I still feel qualified to be standing in front of the audience.</p>
<a id="more"></a>

<p>Today I can no longer use that introduction, as I’ve been awarded as a Microsoft MVP (SQL Server) for 2013. I’m honored to receive the award, but mostly, I’m thankful to my friends in the SQL Family.</p>
<p>The last couple of years have been busy, 2012 definitely taking the cake, by my standards. Through my SQL Server engagement I’ve made countless of friends across the world - The Netherlands, Slovenia, Denmark, Germany, Austria, Sweden, all over the US, South Africa, UK, and many more. I remember how my parents worried about how you couldn’t make friends through the computer… While generally being right, on this point, they were not.</p>
<p>As 2012 neared its end, I also promised myself that I would slow down a tad in 2013. I will still try to keep that promise. I simply cannot afford to travel around as much as I did last year, and I really want to trade just a bit of conference travel for pure leisure travel time. However, this doesn’t mean I’ll go into hibernation for the duration of 2012. Currently I’m scheduled to be presenting at the <a href="http://warmcrocconf.net/" target="_blank">Warm Crocodile</a> conference in Copenhagen on January 17th and I know I’ll do my utmost to attend the PASS Summit this year, having missed it in 2012. What else 2013 will bring, time will tell :)</p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Aug</span>
			<span class="day">27</span>
		</div>
		<div class="lower">2012</div>
	</div>

	<div class="title">
		<h1><a href="/where-does-sql-server-store-the-source-for-stored-procedures/" title="Where Does SQL Server Store the Source for Stored Procedures?" rel="bookmark">Where Does SQL Server Store the Source for Stored Procedures?</a></h1>
		<div class="categories">
			
				<a href="/category/SQL Server - Internals/">SQL Server - Internals</a>
				, 
			
				<a href="/category/SQL Server - OrcaMDF/">SQL Server - OrcaMDF</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>At the moment I’m working on extending <a href="https://github.com/improvedk/OrcaMDF" target="_blank">OrcaMDF Studio</a> to not only list base tables, DMVs and tables, but also stored procedures. That’s easy enough, we just need to query sys.procedures – or that is, the sys.sysschobjs base table, since the sys.procedures DMV isn’t available when SQL Server isn’t running.</p>
<a id="more"></a>

<p>However, I don’t want to just list the stored procedures, I also want to present the source code in them. That brings up a new task – retrieving said source code. Where is it stored? I wasn’t able to find anything on Google, so let’s take a look for ourselves!</p>
<p>I’ve created a new empty database with a data file of three megabytes. In this database, I’ve created a single stored procedure like so:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">SET</span> ANSI_NULLS <span class="keyword">ON</span>
<span class="keyword">GO</span>
<span class="keyword">SET</span> QUOTED_IDENTIFIER <span class="keyword">ON</span>
<span class="keyword">GO</span>
-- =============================================
-- Author:		
-- <span class="keyword">Create</span> <span class="keyword">date</span>: 
-- Description:	
-- =============================================
<span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> XYZ
	<span class="keyword">AS</span>
<span class="keyword">BEGIN</span>
	-- <span class="keyword">SET</span> NOCOUNT <span class="keyword">ON</span> added <span class="keyword">to</span> prevent extra result sets <span class="keyword">from</span>
	-- interfering <span class="keyword">with</span> <span class="keyword">SELECT</span> statements.
	<span class="keyword">SET</span> NOCOUNT <span class="keyword">ON</span>;</span>

    <span class="comment">-- Insert statements for procedure here</span>
	<span class="operator"><span class="keyword">SELECT</span> <span class="string">'AABBCC'</span> <span class="keyword">AS</span> <span class="keyword">Output</span>
<span class="keyword">END</span></span>
</pre></figure>

<p>Now when I select from sys.procedures, we can see that the procedure has object ID 2105058535:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> sys.procedures</span>
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_2.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_2.png" style="max-height: 250px"/></a></div></div>

<p>So far so good. We can then retrieve the definition itself as an nvarchar(MAX) by querying sys.sql_modules like so:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> sys.sql_modules <span class="keyword">where</span> object_id = <span class="number">2105058535</span></span>
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_4.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_4.png" style="max-height: 250px"/></a></div></div>

<p>And there you have it, the source code for the XYZ procedure! But hold on a moment, while I’ve gotten the object ID for the procedure by querying the sys.sysschobjs base table, I don’t have access to sys.sql_modules yet, as that’s a view and not a base table. Let’s take a look at where sys.sql_modules gets the definition from:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> object_definition(object_id(<span class="string">'sys.sql_modules'</span>))</span>
</pre></figure>


<figure class="highlight sql"><pre><span class="operator"><span class="keyword">SELECT</span>
	object_id = o.id,
	definition = Object_definition(o.id),
	uses_ansi_nulls = Sysconv(<span class="keyword">bit</span>, o.status & <span class="number">0x40000</span>), -- OBJMOD_ANSINULLS
	uses_quoted_identifier = sysconv(<span class="keyword">bit</span>, o.status & <span class="number">0x80000</span>),   -- OBJMOD_QUOTEDIDENT
	is_schema_bound = sysconv(<span class="keyword">bit</span>, o.status & <span class="number">0x20000</span>),    -- OBJMOD_SCHEMABOUND
	uses_database_collation = sysconv(<span class="keyword">bit</span>, o.status & <span class="number">0x100000</span>),  -- OBJMOD_USESDBCOLL
	is_recompiled = sysconv(<span class="keyword">bit</span>, o.status & <span class="number">0x400000</span>),     -- OBJMOD_NOCACHE
	null_on_null_input = sysconv(<span class="keyword">bit</span>, o.status & <span class="number">0x200000</span>),   -- OBJMOD_NULLONNULL
	execute_as_principal_id = x.indepid
<span class="keyword">FROM</span>
	sys.sysschobjs o
<span class="keyword">LEFT</span> <span class="keyword">JOIN</span>
	sys.syssingleobjrefs x <span class="keyword">ON</span> x.depid = o.id <span class="keyword">AND</span> x.class = <span class="number">22</span> <span class="keyword">AND</span> x.depsubid = <span class="number">0</span> -- SRC_OBJEXECASOWNER
<span class="keyword">WHERE</span>
	o.pclass &lt;&gt; <span class="number">100</span> <span class="keyword">AND</span>
	(
		(o.type = <span class="string">'TR'</span> <span class="keyword">AND</span> has_access(<span class="string">'TR'</span>, o.id, o.pid, o.nsclass) = <span class="number">1</span>) <span class="keyword">OR</span>
		(type <span class="keyword">IN</span> (<span class="string">'P'</span>,<span class="string">'V'</span>,<span class="string">'FN'</span>,<span class="string">'IF'</span>,<span class="string">'TF'</span>,<span class="string">'RF'</span>,<span class="string">'IS'</span>) <span class="keyword">AND</span> has_access(<span class="string">'CO'</span>, o.id) = <span class="number">1</span>) <span class="keyword">OR</span>
		(type <span class="keyword">IN</span> (<span class="string">'R'</span>,<span class="string">'D'</span>) <span class="keyword">AND</span> o.pid = <span class="number">0</span>)
	)</span>
</pre></figure>

<p>Hmmm, so sys.sql_modules gets the source by using the object_definition system function. Unfortunately, the following doesn’t work:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> object_definition(object_id(<span class="string">'object_definition'</span>))</span>
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_6.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_6.png" style="max-height: 250px"/></a></div></div>

<p>I happen to remember that sys.sql_modules is a replacement for the, now deprecated, sys.syscomments legacy view. Let’s take a look at where that one gets the source from:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> object_definition(object_id(<span class="string">'sys.syscomments'</span>))</span>
</pre></figure>


<figure class="highlight sql"><pre><span class="operator"><span class="keyword">SELECT</span>
	o.id <span class="keyword">AS</span> id,  
	convert(<span class="keyword">smallint</span>, <span class="keyword">case</span> <span class="keyword">when</span> o.type <span class="keyword">in</span> (<span class="string">'P'</span>, <span class="string">'RF'</span>) <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">AS</span> <span class="keyword">number</span>,  
	s.colid,
	s.status,  
	convert(varbinary(<span class="number">8000</span>), s.text) <span class="keyword">AS</span> ctext,  
	convert(<span class="keyword">smallint</span>, <span class="number">2</span> + <span class="number">4</span> * (s.status & <span class="number">1</span>)) <span class="keyword">AS</span> texttype,  
	convert(<span class="keyword">smallint</span>, <span class="number">0</span>) <span class="keyword">AS</span> <span class="keyword">language</span>,  
	sysconv(<span class="keyword">bit</span>, s.status & <span class="number">1</span>) <span class="keyword">AS</span> encrypted,  
	sysconv(<span class="keyword">bit</span>, <span class="number">0</span>) <span class="keyword">AS</span> compressed,  
	s.text  
<span class="keyword">FROM</span>
	sys.sysschobjs o
<span class="keyword">CROSS</span> APPLY
	OpenRowset(<span class="keyword">TABLE</span> SQLSRC, o.id, <span class="number">0</span>) s  
<span class="keyword">WHERE</span>
	o.nsclass = <span class="number">0</span> <span class="keyword">AND</span>
	o.pclass = <span class="number">1</span> <span class="keyword">AND</span>
	o.type <span class="keyword">IN</span> (<span class="string">'C'</span>,<span class="string">'D'</span>,<span class="string">'P'</span>,<span class="string">'R'</span>,<span class="string">'V'</span>,<span class="string">'X'</span>,<span class="string">'FN'</span>,<span class="string">'IF'</span>,<span class="string">'TF'</span>,<span class="string">'RF'</span>,<span class="string">'IS'</span>,<span class="string">'TR'</span>) <span class="keyword">AND</span>
	has_access(<span class="string">'CO'</span>, o.id) = <span class="number">1</span>  

<span class="keyword">UNION</span> <span class="keyword">ALL</span>  

<span class="keyword">SELECT</span>
	c.object_id <span class="keyword">AS</span> id,  
	convert(<span class="keyword">smallint</span>, c.column_id) <span class="keyword">AS</span> <span class="keyword">number</span>,  
	s.colid,
	s.status,  
	convert(varbinary(<span class="number">8000</span>), s.text) <span class="keyword">AS</span> ctext,  
	convert(<span class="keyword">smallint</span>, <span class="number">2</span> + <span class="number">4</span> * (s.status & <span class="number">1</span>)) <span class="keyword">AS</span> texttype,  
	convert(<span class="keyword">smallint</span>, <span class="number">0</span>) <span class="keyword">AS</span> <span class="keyword">language</span>,  
	sysconv(<span class="keyword">bit</span>, s.status & <span class="number">1</span>) <span class="keyword">AS</span> encrypted,  
	sysconv(<span class="keyword">bit</span>, <span class="number">0</span>) <span class="keyword">AS</span> compressed,  
	s.text  
<span class="keyword">FROM</span>
	sys.computed_columns c
<span class="keyword">CROSS</span> APPLY
	OpenRowset(<span class="keyword">TABLE</span> SQLSRC, c.object_id, c.column_id) s  

<span class="keyword">UNION</span> <span class="keyword">ALL</span>  

<span class="keyword">SELECT</span>
	p.object_id <span class="keyword">AS</span> id,  
	convert(<span class="keyword">smallint</span>, p.procedure_number) <span class="keyword">AS</span> <span class="keyword">number</span>,  
	s.colid,
	s.status,  
	convert(varbinary(<span class="number">8000</span>), s.text) <span class="keyword">AS</span> ctext,  
	convert(<span class="keyword">smallint</span>, <span class="number">2</span> + <span class="number">4</span> * (s.status & <span class="number">1</span>)) <span class="keyword">AS</span> texttype,  
	convert(<span class="keyword">smallint</span>, <span class="number">0</span>) <span class="keyword">AS</span> <span class="keyword">language</span>,  
	sysconv(<span class="keyword">bit</span>, s.status & <span class="number">1</span>) <span class="keyword">AS</span> encrypted,  
	sysconv(<span class="keyword">bit</span>, <span class="number">0</span>) <span class="keyword">AS</span> compressed,  
	s.text  
<span class="keyword">FROM</span>
	sys.numbered_procedures p
<span class="keyword">CROSS</span> APPLY
	OpenRowset(<span class="keyword">TABLE</span> SQLSRC, p.object_id, p.procedure_number) s  

<span class="keyword">UNION</span> <span class="keyword">ALL</span>  

<span class="keyword">SELECT</span>
	o.id <span class="keyword">AS</span> id,  
	convert(<span class="keyword">smallint</span>, <span class="keyword">case</span> <span class="keyword">when</span> o.type <span class="keyword">in</span> (<span class="string">'P'</span>, <span class="string">'RF'</span>) <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">AS</span> <span class="keyword">number</span>,  
	s.colid,
	s.status,  
	convert(varbinary(<span class="number">8000</span>), s.text) <span class="keyword">AS</span> ctext,  
	convert(<span class="keyword">smallint</span>, <span class="number">2</span>) <span class="keyword">AS</span> texttype,  
	convert(<span class="keyword">smallint</span>, <span class="number">0</span>) <span class="keyword">AS</span> <span class="keyword">language</span>,  
	sysconv(<span class="keyword">bit</span>, <span class="number">0</span>) <span class="keyword">AS</span> encrypted,  
	sysconv(<span class="keyword">bit</span>, <span class="number">0</span>) <span class="keyword">AS</span> compressed,  
	s.text  
<span class="keyword">FROM</span>
	sys.sysobjrdb o
<span class="keyword">CROSS</span> APPLY
	OpenRowset(<span class="keyword">TABLE</span> SQLSRC, o.id, <span class="number">0</span>) s  
<span class="keyword">WHERE</span>
	db_id() = <span class="number">1</span> <span class="keyword">AND</span> 
	o.type <span class="keyword">IN</span> (<span class="string">'P'</span>,<span class="string">'V'</span>,<span class="string">'X'</span>,<span class="string">'FN'</span>,<span class="string">'IF'</span>,<span class="string">'TF'</span>)</span>
</pre></figure>

<p>Bummer. It doesn’t use object_definition, but instead another internal function in the form of OpenRowset(TABLE SQLSRC, o.id, 0). I’m not one to give up easily though – I’ve previously <a href="/exploring-the-sys-system_internals_partition_columns-ti-field">reverse engineered the OpenRowset(TABLE RSCPROP)</a> function.</p>
<p>Let’s take a different approach to the problem. Everything in SQL Server is stored on 8KB pages in a fixed format. As the procedures aren’t encrypted, they must be stored in clear text somewhere in the database – we just don’t know where. Let’s detach the database and crack open a hex editor (I highly recommend HxD):</p>
<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_10.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_10.png" style="max-height: 250px"/></a></div></div>

<p>Now let’s see if we can find the procedure. On purpose I made it return “SELECT ‘AABBCC’ AS Output” as that would be easy to search for:</p>
<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_12.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_12.png" style="max-height: 250px"/></a></div></div>

<p>And whadda ya know, there it is:</p>
<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_14.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_14.png" style="max-height: 250px"/></a></div></div>

<p>OK, so now we know that the source is stored in the database, just not where specifically. The data is stored at offset 0x00101AF0 in the data file. In decimal, that’s offset 01055472. As each data page is exactly 8KB, we can calculate the ID of the data page that this is stored on (using integer math):</p>
<p>01055472 / 8192 = 128</p>
<p>Aha! At this point we know that the source is stored on page 128 – how about we take a look at that page using DBCC PAGE? After reattaching the database, run:</p>
<figure class="highlight sql"><pre>dbcc traceon (3604)
dbcc page(Test2, 1, 128, 0)
</pre></figure>

<p>Note that I’m using style 0 for the DBCC PAGE command. At this point, I just want to see the header – there just might be something interesting in there:</p>
<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_22.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_22.png" style="max-height: 250px"/></a></div></div>

<p>As expected, it’s a normal data page, as indicated by the m_type field having a value of 1 (which is the internal page type ID for a data page). More interesting though, we can see that the page belongs to object ID 60! Let’s have a look at what lies behind that object ID:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> sys.sysobjects <span class="keyword">where</span> id = <span class="number">60</span></span>
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_24.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_24.png" style="max-height: 250px"/></a></div></div>

<p>And all of a sudden, the hunt is on! Let’s have a look at the contents of sys.sysobjvalues. Note that before you can select from this table, you’ll have to connect using a <a href="http://msdn.microsoft.com/en-us/library/ms189595.aspx" target="_blank">dedicated administrator connection</a>, seeing as it’s an internal base table:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> sys.sysobjvalues</span>
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_28.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_28.png" style="max-height: 250px"/></a></div></div>

<p>There’s obviously a lot of stuff in here we don’t care about, but let’s try and filter that objid column down to the object ID of our procedure – 2105058535:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> sys.sysobjvalues <span class="keyword">where</span> objid = <span class="number">2105058535</span></span>
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_30.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_30.png" style="max-height: 250px"/></a></div></div>

<p>I wonder what that imageval column contains, if I remember correctly 0x2D2D would be “—“ in ASCII, which reminds me quite a lot of the beginning of the XYZ procedure. Let’s try and convert that column into human:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span> convert(<span class="keyword">varchar</span>(<span class="aggregate">max</span>), imageval) <span class="keyword">from</span> sys.sysobjvalues <span class="keyword">where</span> objid = <span class="number">2105058535</span></span>
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_32.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_32.png" style="max-height: 250px"/></a></div></div>

<p>And there you have it my dear reader; the source code for the XYZ stored procedure, as stored in the sys.sysobjvalues base table. As a final example, here’s how you’d retrieve a list of user stored procedures with their source code, without using neither object_definition nor sys.sql_modules:</p>
<figure class="highlight sql"><pre><span class="operator"><span class="keyword">select</span>
	p.name,
	<span class="keyword">cast</span>(v.imageval <span class="keyword">as</span> <span class="keyword">varchar</span>(<span class="aggregate">MAX</span>))
<span class="keyword">from</span>
	sys.procedures p
<span class="keyword">inner</span> <span class="keyword">join</span>
	sys.sysobjvalues v <span class="keyword">on</span> p.object_id = v.objid</span>
</pre></figure>

<div class="imgwrapper" style=""><div><a href="/where-does-sql-server-store-the-source-for-stored-procedures/image_34.png" class="fancy"><img src="/where-does-sql-server-store-the-source-for-stored-procedures/image_34.png" style="max-height: 250px"/></a></div></div>

<p>Want to see more stuff like this? Don’t miss my <a href="/presenting-at-sqlsaturday-162-in-cambridge">full-day precon at SQL Saturday #162 in Cambridge, UK</a> (Friday, September 7th), or my <a href="/presenting-at-bleeding-edge-in-slovenia">Revealing the Magic session at Bleeding Edge 2012</a> in Laško, Slovenia (October 23-24th)!</p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Aug</span>
			<span class="day">26</span>
		</div>
		<div class="lower">2012</div>
	</div>

	<div class="title">
		<h1><a href="/presenting-at-bleeding-edge-in-slovenia/" title="Presenting at Bleeding Edge in Slovenia" rel="bookmark">Presenting at Bleeding Edge in Slovenia</a></h1>
		<div class="categories">
			
				<a href="/category/Conferences and Presenting/">Conferences and Presenting</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>I’ve been to Slovenia many times, though only recently in a professional context, as I presented at <a href="/2012-nt-konferenca-slides-demos">NT Konferenca earlier this year</a>. Several times, and from multiple people, I’ve heard about a local conference named Bleeding Edge, and how it was put together with nothing but level 400+ content with top quality speakers.</p>
<a id="more"></a>

<p>This summer, I happened to drop by Ljubljana to visit some friends of mine, as I was in the area on vacation. At some point in the evening, the talk turned to Bleeding Edge again, and before I knew it, <a href="http://weblogs.sqlteam.com/mladenp/default.aspx" target="_blank">Mladen Prajdić</a> said he’d introduce me to one of the organizers, <a href="http://milambda.blogspot.dk/" target="_blank">Matija Lah</a>.</p>
<p>Today, I’m excited to announce that I’ll be presenting my <a href="http://www.bleedingedge.si/Conference/Predavanja#rasmussen" target="_blank">Revealing the Magic</a> session at <a href="http://www.bleedingedge.si/Conference" target="_blank">Bleeding Edge 2012</a> on the 23-24th of October in Laško, Slovenia.</p>
<p>I’ve presented the session before at other venues, and this one will follow the usual fast and furious format. There are 10 hours of content compressed into just one hour. I will be showing the latest <a href="https://github.com/improvedk/OrcaMDF" target="_blank">OrcaMDF</a> bits during the session and my usual warning goes: This session is not meant to teach as much as it’s meant to inspire you. Inspire you to realize how simple SQL Server really is at its core, once you master the immediate complexity. For a full description of the session, I recommend you go to the <a href="http://www.bleedingedge.si/Conference/Predavanja#rasmussen" target="_blank">Bleeding Edge site</a>.</p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Jul</span>
			<span class="day">18</span>
		</div>
		<div class="lower">2012</div>
	</div>

	<div class="title">
		<h1><a href="/presenting-at-sqlsaturday-162-in-cambridge/" title="Presenting at SQLSaturday" rel="bookmark">Presenting at SQLSaturday</a></h1>
		<div class="categories">
			
				<a href="/category/Conferences and Presenting/">Conferences and Presenting</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<div class="imgwrapper" style=""><div><a href="/presenting-at-sqlsaturday-162-in-cambridge/image_4.png" class="fancy"><img src="/presenting-at-sqlsaturday-162-in-cambridge/image_4.png" style="max-height: 250px"/></a></div></div>

<a id="more"></a>

<p>The official announcement was made a couple of days ago and I’m embarassingly late to follow up myself. “Unfortunately” this is what I’m doing right now, and I must say that achieving a proper 3G connection in the middle of the <a href="http://en.wikipedia.org/wiki/Dolomites" target="_blank">Dolomites</a> has proven rather difficult…</p>
<p>Anyways, I’m happy and honored to say that I’ll be presenting my <em>A Deep-Dive into the depths of the SQL Server storage engine and MDF file format  </em>precon at SQLSaturday #162 in Cambridge. I’ll be presenting my precon alongside SQL Server authorities like Jen Stirrup and Buck Woody, not to mention all of the regular session speakers, which have yet to be announced.</p>
<p>Allow me to present some of the feedback I got on my <em>Revealing the Magic</em> session, which is a 1-hour version of my precon, at the last SQLBits:</p>
<blockquote>
<p>It was perhaps too much detail to cram into a 1 hour session.</p>
<p>A bit rushed. I can say it is probably the first time I felt my knowledge was not<br>enough to keep up with mark’s content.</p>
<p>Great pace of session - very fast, no messing about - excellent - more sessions<br>should get on with it, like this. Loved the session and very technical - exactly<br>what the benefit of having this stuff delivered face-to-face.</p>
<p>I know he said it at the beginning. but at times it was just too fast. Maybe let the<br>people digest what was said.</p>
</blockquote>
<p>I love receiving constructive feedback, and this is so spot on! I definitely need to weed out a bit of content from my 1-hour session as there’s simply too much to go through in just one hour. Having a full day to present the same content is a much more fitting format, and it will allow me to go at a somewhat more normal pace, as well as leaving plenty of time for Q&amp;A during the presentation.</p>
<p>I will however still warn you that this is a level 500 precon. I will go very in depth and there will be plenty of bits and bytes to show – documented as well as undocumented.</p>
<p>Please check out the <a href="http://sqlcambs.org.uk/" target="_blank">Cambridgeshire SQL Server User Group page</a> for more information on mine, Jen Stirrup and Buck Woodys precons. Make sure to register, if not for mine then for one of the other excellent precons!</p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Jun</span>
			<span class="day">19</span>
		</div>
		<div class="lower">2012</div>
	</div>

	<div class="title">
		<h1><a href="/video-from-ndc-2012-revealing-the-sql-server-magic/" title="Video From NDC 2012: Revealing the SQL Server Magic" rel="bookmark">Video From NDC 2012: Revealing the SQL Server Magic</a></h1>
		<div class="categories">
			
				<a href="/category/Conferences and Presenting/">Conferences and Presenting</a>
				, 
			
				<a href="/category/SQL Server - Internals/">SQL Server - Internals</a>
				, 
			
				<a href="/category/SQL Server - OrcaMDF/">SQL Server - OrcaMDF</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>I’m really lagging behind on my blogging – life is busy as the moment! Just a couple of weeks ago I presented my Revealing the Magic session at the Norwegian Developers Conference in Oslo. I was quite excited to give my SQL Server oriented session to a crowd of developers – a 500 level session, at SQL Server events that is.</p>
<a id="more"></a>

<p>I just got the feedback today – 0 reds, 3 yellows and 15 greens – very happy with that, especially when taking the audience into account. To those of you who haven’t seen my session before, here it is:</p>
<iframe src="http://player.vimeo.com/video/43659054" height="281" width="500" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<p><a href="http://vimeo.com/43659054" target="_blank">Mark S. Rasmussen - Revealing the SQL Server Magic</a> from <a href="http://vimeo.com/ndcoslo" target="_blank">NDCOslo</a> on <a href="http://vimeo.com" target="_blank">Vimeo</a>.</p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>

	<article>
	<div class="datebox">
		<div class="upper">
			<span class="month">Jun</span>
			<span class="day">01</span>
		</div>
		<div class="lower">2012</div>
	</div>

	<div class="title">
		<h1><a href="/2012-nt-konferenca-slides-demos/" title="2012 NT Konferenca Slides + Demos" rel="bookmark">2012 NT Konferenca Slides + Demos</a></h1>
		<div class="categories">
			
				<a href="/category/Conferences and Presenting/">Conferences and Presenting</a>
				
			
		</div>
		
		<div class="clear"></div>
	</div>

	<div id="bodywrapper" >

		
		
			<div class="body">
			
				<p>I presented two sessions at this years <a href="http://www.ntk.si/" target="_blank">NT Konferenca</a>. It was my first NTK, and what an NTK it was! I’m really hoping I’ll be back to present again – I’ve been to Slovenia many times before on non-technical visits, and now I’ve been able to confirm that they sure know how to run their conferences and cater for the attendees and speakers :)</p>
<a id="more"></a>

<p><a href="2012-05-24-NTK-Optimizing-Storage-and-Performance-Using-Page-and-Row-Compression-60-minutes.rar">Optimizing Storage and Performance Using Page and Row Compression.rar - Slides &amp; demos</a></p>
<p><a href="2012-05-24-NTK-Storing-Character-Data-Optimally-60-minutes.rar">Storing Character Data Optimally.rar - Slides &amp; demos</a></p>


				<div style="clear: both"></div>

				

			</div>

		

		

	</div>
</article>


<div class="paging">
	<a href="/page/4/"><div class="past">« Past</div></a>
	<a href="/page/2/"><div class="future">Future »</div></a>
	<div class="clear"></div>
</div>

				</div>
			</div>

			<div id="asides">
				<div class="categories aside">
					<span class="sectiontitle">CATEGORIES</span>
					<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/category/.NET/">.NET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/AS/Flex/Flash/">AS/Flex/Flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Amazon Web Services/">Amazon Web Services</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Computer Science/">Computer Science</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Conferences and Presenting/">Conferences and Presenting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/IIS/">IIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Life/">Life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Miscellaneous/">Miscellaneous</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Performance/">Performance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Poker/">Poker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server/">SQL Server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Community/">SQL Server - Community</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Data Types/">SQL Server - Data Types</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Internals/">SQL Server - Internals</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Optimization/">SQL Server - Optimization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - OrcaMDF/">SQL Server - OrcaMDF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/SQL Server - Tricks/">SQL Server - Tricks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Testing/">Testing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Tools of the Trade/">Tools of the Trade</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Umbraco/">Umbraco</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Visual Studio/">Visual Studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Web/">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Windbg/">Windbg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/category/Windows/">Windows</a></li></ul>

					
				</div>

				<div class="archive aside">
					<span class="sectiontitle">ARCHIVE</span>
					<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archive/2014">2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2013">2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2012">2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2011">2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2010">2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2009">2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2008">2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2007">2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2006">2006</a></li></ul>
				</div>
			</div>

			<div class="clear"></div>
		</div>
		
		<footer>
			<div class="wrapper">Copyright &copy; 2014 Mark S. Rasmussen</div>
		</footer>

		<script type="text/javascript">
			$(function () {
				// Show mobile menu
				$("li.navicon").click(function () {
					if ($("header ul.mobile a").length == 0) {
						// Pages
						$mobilePages = $("div#naviconcontent ul.pages");
						$("header nav ul.normal > li").not(".navicon").each(function (i, el) {
							$mobilePages.append($(el).clone());
						});

						// Categories
						$mobileCategories = $("div#naviconcontent ul.categories");
						$("div#asides div.categories > ul > li").each(function (i, el) {
							$mobileCategories.append($(el).clone());
						});

						// Archive
						$mobileArchive = $("div#naviconcontent ul.archive");
						$("div#asides div.archive > ul > li").each(function (i, el) {
							$mobileArchive.append($(el).clone());
						});
					};

					$("header ul.mobile").toggle();
				});

				// Fancybox setup
				$("a.fancy").fancybox({
					hideOnContentClick: true,
					overlayShow: true
				});
			});
		</script>
	</body>
</html>